<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="apple-touch-icon" href="apple-touch-icon.png">
        <!-- Place favicon.ico in the root directory -->

        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/main.css">
        <link rel="stylesheet" href="css/mui.min.css">
        <!--<script src="js/vendor/modernizr-2.8.3.min.js"></script>-->
        <style>
            .mui-row.mui-fullscreen>[class*="mui-col-"] {
                height: 100%;
            }

            .mui-col-xs-3,
            .mui-col-xs-9 {
                overflow-y: auto;
                height: 100%;
                position: relative;
                min-height: 1px
            }
            .mui-col-xs-9 {
                width:75%;
            }
            .mui-segmented-control .mui-control-item {
                line-height: 50px;
                width: 100%;
            }

            .mui-control-content {
                display: block;
            }

            .mui-segmented-control.mui-segmented-control-inverted .mui-control-item.mui-active {
                background-color: #fff;
            }
            .mui-content {
                background-color: #efeff4;
                -webkit-overflow-scrolling: touch
            }
            .mui-row:after, .mui-row:before {
                display: table;
                content: ' '
            }
            .mui-row:after {
                 clear: both
             }
            .mui-row > [class*=mui-col-] {
                float: left
            }
            .mui-fullscreen {
                position: relative;
                top: 0;
                right: 0;
                bottom: 0;
                left: 0
            }
            .mui-segmented-control.mui-segmented-control-inverted {
                width: 100%;
                border: 0;
                border-radius: 0
            }
            .mui-segmented-control.mui-segmented-control-vertical {
                border-collapse: collapse;
                border-width: 0;
                border-radius: 0
            }
            .mui-segmented-control {
                font-size: 15px;
                font-weight: 400;
                position: relative;
                display: table;
                overflow: hidden;
                width: 100%;
                table-layout: fixed;
                border: 1px solid #007aff;
                border-radius: 3px;
                background-color: transparent;
                -webkit-touch-callout: none
            }
            .mui-control-item {
                border-bottom: 1px solid #c8c7cc
            }
        </style>
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <!-- Add your site or application content here -->
        <div class="screen">
            <div class="dock bottom">
                <div>
                    <img id="settings" src="http://downloadicons.net/sites/default/files/settings-icon-61501.png"/>
                </div>
                <div>
                    <img id="chrome" src="https://cdn1.iconfinder.com/data/icons/logotypes/32/chrome-512.png"/>
                </div>
            </div>

            <div class="settings">
                <div class="app-top-bar">
                    <div>
                        <img id="close-settings" src="https://cdn4.iconfinder.com/data/icons/geomicons/32/672366-x-128.png"/>
                    </div>
                </div>

                    <div class="mui-content mui-row mui-fullscreen">
                        <div class="mui-col-xs-3">
                            <div id="segmentedControls" class="mui-segmented-control mui-segmented-control-inverted mui-segmented-control-vertical">
                            </div>
                        </div>
                        <div id="segmentedControlContents" class="mui-col-xs-9" style="border-left: 1px solid #c8c7cc;">
                            <div id="content1" class="mui-control-content">
                                <ul class="mui-table-view">
                                  <li class="mui-table-view-cell">
                                      <div class="background-img">
                                          <h3>选择桌面背景</h3>
                                          <div class="imag" id="img1">
                                              <img src="img/girl1.jpg"/>
                                          </div>

                                          <div class="imag" id="img2">
                                              <img class="chosen" src="img/girl2.jpg"/>
                                          </div>

                                          <div class="imag" id="img3">
                                              <img src="img/girl3.jpg"/>
                                          </div>

                                          <div class="imag" id="img4">
                                              <img src="img/girl4.jpg"/>
                                          </div>

                                          <div class="imag" id="img5">
                                              <img src="img/girl5.jpg"/>
                                          </div>

                                          <div class="imag" id="img6">
                                              <img src="img/girl6.jpg"/>
                                          </div>

                                          <div class="imag" id="img7">
                                              <img src="img/girl7.jpg"/>
                                          </div>

                                          <div class="imag" id="img8">
                                              <img src="img/girl8.jpg"/>
                                          </div>

                                          <div class="imag" id="img9">
                                              <img src="img/girl9.jpg"/>
                                          </div>

                                      </div>

                                      <div class="dock-settings">

                                          <div class="dock-sliders">
                                              <h3>隐藏工具栏</h3>
                                              <div class="slider" id="dock-hidden-slider">
                                                  <div class="slider-line"></div>
                                                  <div class="slider-circle"></div>
                                              </div>
                                          </div>

                                          <div class="dock-sliders">
                                              <h3>底部显示</h3>
                                              <div class="slider dock-position-slider slider-active" id="bottom">
                                                  <div class="slider-line"></div>
                                                  <div class="slider-circle"></div>
                                              </div>
                                          </div>

                                          <div class="dock-sliders">
                                              <h3>右侧显示</h3>
                                              <div class="slider dock-position-slider" id="right">
                                                  <div class="slider-line"></div>
                                                  <div class="slider-circle"></div>
                                              </div>
                                          </div>

                                          <div class="dock-sliders">
                                              <h3>左侧显示</h3>
                                              <div class="slider dock-position-slider" id="left">
                                                  <div class="slider-line"></div>
                                                  <div class="slider-circle"></div>
                                              </div>
                                          </div>
                                      </div>
                                  </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!--<div></div>-->
                    <!--<div></div>-->
                </div>
            </div>


            <div class="internet">
                <div class="app-top-bar">
                    <div>
                        <img id="close-internet" src="https://cdn4.iconfinder.com/data/icons/geomicons/32/672366-x-128.png"/>
                    </div>
                </div>
                <iframe src="http://www.bing.com/"></iframe>
            </div>
        </div>

        <script src="js/mui.min.js"></script>
        <script>
            mui.init({
                swipeBack: true //启用右滑关闭功能
            });
            var controls = document.getElementById("segmentedControls");
            var contents = document.getElementById("segmentedControlContents");
            var html = [];
            var i = 1,
                j = 1,
                m = 16, //左侧选项卡数量+1
                n = 0; //每个选项卡列表数量+1
            for (; i < m; i++) {
                html.push('<a class="mui-control-item" data-index="' + (i - 1) + '" href="#content' + i + '">选项' + i + '</a>');
            }
            controls.innerHTML = html.join('');
//            html = [];
//            for (i = 1; i < m; i++) {
//                html.push('<div id="content' + i + '" class="mui-control-content"><ul class="mui-table-view">');
//                for (j = 1; j < n; j++) {
//                    html.push('<li class="mui-table-view-cell">第' + i + '个选项卡子项-' + j + '</li>');
//                }
//                html.push('</ul></div>');
//            }
//            contents.innerHTML = html.join('');
            //默认选中第一个
            controls.querySelector('.mui-control-item').classList.add('mui-active');
            contents.querySelector('.mui-control-content').classList.add('mui-active');
            (function() {
                var controlsElem = document.getElementById("segmentedControls");
                var contentsElem = document.getElementById("segmentedControlContents");
                var controlListElem = controlsElem.querySelectorAll('.mui-control-item');
                var contentListElem = contentsElem.querySelectorAll('.mui-control-content');
                var controlWrapperElem = controlsElem.parentNode;
                var controlWrapperHeight = controlWrapperElem.offsetHeight;
                var controlMaxScroll = controlWrapperElem.scrollHeight - controlWrapperHeight;//左侧类别最大可滚动高度
                var maxScroll = contentsElem.scrollHeight - contentsElem.offsetHeight;//右侧内容最大可滚动高度
                var controlHeight = controlListElem[0].offsetHeight;//左侧类别每一项的高度
                var controlTops = []; //存储control的scrollTop值
                var contentTops = [0]; //存储content的scrollTop值
                var length = contentListElem.length;
                for (var i = 0; i < length; i++) {
                    controlTops.push(controlListElem[i].offsetTop + controlHeight);
                }
                for (var i = 1; i < length; i++) {
                    var offsetTop = contentListElem[i].offsetTop;
                    if (offsetTop + 100 >= maxScroll) {
                        var height = Math.max(offsetTop + 100 - maxScroll, 100);
                        var totalHeight = 0;
                        var heights = [];
                        for (var j = i; j < length; j++) {
                            var offsetHeight = contentListElem[j].offsetHeight;
                            totalHeight += offsetHeight;
                            heights.push(totalHeight);
                        }
                        for (var m = 0, len = heights.length; m < len; m++) {
                            contentTops.push(parseInt(maxScroll - (height - heights[m] / totalHeight * height)));
                        }
                        break;
                    } else {
                        contentTops.push(parseInt(offsetTop));
                    }
                }
                contentsElem.addEventListener('scroll', function() {
                    var scrollTop = contentsElem.scrollTop;
                    for (var i = 0; i < length; i++) {
                        var offsetTop = contentTops[i];
                        var offset = Math.abs(offsetTop - scrollTop);
//						console.log("i:"+i+",scrollTop:"+scrollTop+",offsetTop:"+offsetTop+",offset:"+offset);
                        if (scrollTop < offsetTop) {
                            if (scrollTop >= maxScroll) {
                                onScroll(length - 1);
                            } else {
                                onScroll(i - 1);
                            }
                            break;
                        } else if (offset < 20) {
                            onScroll(i);
                            break;
                        }else if(scrollTop >= maxScroll){
                            onScroll(length - 1);
                            break;
                        }
                    }
                });
                var lastIndex = 0;
                //监听content滚动
                var onScroll = function(index) {
                    if (lastIndex !== index) {
                        lastIndex = index;
                        var lastActiveElem = controlsElem.querySelector('.mui-active');
                        lastActiveElem && (lastActiveElem.classList.remove('mui-active'));
                        var currentElem = controlsElem.querySelector('.mui-control-item:nth-child(' + (index + 1) + ')');
                        currentElem.classList.add('mui-active');
                        //简单处理左侧分类滚动，要么滚动到底，要么滚动到顶
                        var controlScrollTop = controlWrapperElem.scrollTop;
                        if (controlScrollTop + controlWrapperHeight < controlTops[index]) {
                            controlWrapperElem.scrollTop = controlMaxScroll;
                        } else if (controlScrollTop > controlTops[index] - controlHeight) {
                            controlWrapperElem.scrollTop = 0;
                        }
                    }
                };
                //滚动到指定content
                var scrollTo = function(index) {
                    contentsElem.scrollTop = contentTops[index];
                };
                mui(controlsElem).on('tap', '.mui-control-item', function(e) {
                    scrollTo(this.getAttribute('data-index'));
                    return false;
                });
            })();
        </script>


        <script src="http://code.jquery.com/jquery-3.1.0.min.js" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" crossorigin="anonymous"></script>
        <script>window.jQuery || document.write('<script src="js/jquery-{{JQUERY_VERSION}}.min.js"><\/script>')</script>
        <!--<script src='https://cdnjs.cloudflare.com/ajax/libs/react/15.1.0/react-dom.min.js'></script>-->
        <!--<script src='https://cdnjs.cloudflare.com/ajax/libs/react/15.1.0/react.min.js'></script>-->
        <!--<script src="js/webOS-demo-full.js"></script>-->
        <script src="js/main.js"></script>
        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            (function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=
            function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;
            e=o.createElement(i);r=o.getElementsByTagName(i)[0];
            e.src='https://www.google-analytics.com/analytics.js';
            r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));
            ga('create','UA-0719-4','auto');ga('send','pageview');
        </script>
    </body>
</html>
